local intersect = require 'bump.intersect'

describe('bump.intersect', function()
  describe('.quick', function()
    it('returns true when two boxes intersect', function()
      assert.truthy(intersect.quick(0,0,10,10, 5,5,10,10))
    end)
    it('returns false when two boxes do not intersect', function()
      assert.falsy(intersect.quick(0,0,10,10, 20,20,10,10))
    end)
  end)

  describe('.displacement', function()
    it('returns the displacement vector needed to move box1 out of box2', function()
      assert.same({-6,-6}, {intersect.displacement(0,0,10,10, 4,4,10,10)})
      assert.same({-4,-4}, {intersect.displacement(0,0,10,10, 6,6,10,10)})
      assert.same({-5,-5}, {intersect.displacement(0,0,10,10, 5,5,10,10)})
    end)
  end)

  describe('.areaAndDisplacement', function()
    it('returns the intersection area and dv needed to move box1 out of box2', function()
      assert.same({36, -6,-6}, {intersect.areaAndDisplacement(0,0,10,10, 4,4,10,10)})
      assert.same({16, -4,-4}, {intersect.areaAndDisplacement(0,0,10,10, 6,6,10,10)})
      assert.same({25, -5,-5}, {intersect.areaAndDisplacement(0,0,10,10, 5,5,10,10)})
    end)
  end)
end)
